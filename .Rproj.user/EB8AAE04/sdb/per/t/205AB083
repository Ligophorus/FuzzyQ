{
    "collab_server" : "",
    "contents" : "sort_by_clus <- function(M, fq.obj) {\n  if (length(dim(M)) != 2 || !(is.data.frame(M) || is.numeric(M)))\n    stop(\"M is not a dataframe or a numeric matrix.\")\n  if (\"fuzzyq\" %in% class(fq.obj) == FALSE) stop(\"fq.obj is not a fuzzyq\n                                                  object.\")\n  if (fq.obj$is.sorted == FALSE) stop(\"Common-rare species are not sorted in M.\n                                      Run fuzzyq with sorting = TRUE\")\n  M <- M[, match(rownames(fq.obj$spp), colnames(M))]\n  return (M)\n}\n\nao_plot <- function(fq, col.rc = c(\"red\", \"blue\"), opacity = 0.1,\n                  log.x = FALSE, log.y = FALSE,\n                  xLab = \"Fraction of sites occupied\", yLab = \"Mean abundance\",\n                    ...) {\n  if (\"fuzzyq\" %in% class(fq) == FALSE) stop(\"fq is not a fuzzyq object.\")\n  if (fq$is.sorted == FALSE) stop(\"Common-rare species are not sorted in M.\n                              Run fuzzyq with sorting= TRUE\")\n  if (length(col.rc) != 2) stop(\"Wrong col.rc format. Specify two colors\")\n  # check color format\n   is.color <- function(x) {\n    if (is.numeric(x)) return(x > 0 & (x %% 1 == 0))\n    if (any(grepl(\"^[0-9]+$\", x))) {\n      x[grepl(\"^[0-9]+$\", x)] <- palette()[(as.numeric(x[grepl(\"^[0-9]+$\",\n                                            x)]) - 1) %% 8 + 1]\n    }\n    y <- grepl(\"^\\\\#[a-fA-F0-9]{6}$\", x) | grepl(\"^\\\\#[a-fA-F0-9]{8}$\",\n                                                 x) | (x %in% colors())\n    return(y)\n   }\n  if (all(is.color(col.rc)) == FALSE) stop(\"Wrong col.rc specification.\n                                           Use a valid color call.\")\n      x <- fq$A_O[, 1]\n      y <- fq$A_O[, 2]\n      if (log.x == TRUE) {x <- log10(x)\n      xLab = bquote(paste(log[10]~\"(\"~.(xLab)~\")\"))}\n      if (log.y == TRUE) {y <- log10(y)\n      yLab= bquote(paste(log[10]~\"(\"~.(yLab)~\")\"))}\n      plot(x, y, col=col.rc[fq$spp[ ,1]+1], xlab=xLab, ylab=yLab, ...)\n      #draw convex hulls around common,rare spp\n      xy <- cbind(x, y)\n      Hrar <- chull(xy[which(fq$spp[,1]==0),])\n      Hcom <- chull(xy[which(fq$spp[,1]==1),])\n      polygon(xy[which(fq$spp[,1]==0),][Hrar,],\n              border=col.rc[1], col=adjustcolor(col.rc[1], alpha.f = opacity))\n      polygon(xy[which(fq$spp[,1]==1),][Hcom,],\n              border=col.rc[2], col=adjustcolor(col.rc[2], alpha.f = opacity))\n}\n",
    "created" : 1594391821973.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "811954105",
    "id" : "205AB083",
    "lastKnownWriteTime" : 1594393327,
    "last_content_update" : 1594393327389,
    "path" : "F:/nuvol/clara/FuzzyQ_R/FuzzyQ/R/utility_functions.R",
    "project_path" : "R/utility_functions.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}